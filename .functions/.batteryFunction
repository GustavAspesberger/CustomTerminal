# Custom battery level Indicator

prompt_zsh_battery_level() {

  local percentage1=`pmset -g ps  |  sed -n 's/.*[[:blank:]]+*\(.*%\).*/\1/p'`
  local percentage=`echo "${percentage1//\%}"`
  local color='%F{yellow}'
  local symbol="\uf00d"

  pmset -g ps | grep "discharging" > /dev/null
  if [ $? -eq 0 ]; then
    local charging="false";
  else
    local charging="true";
  fi

  if [ $percentage -le 20 ]
    then if [ $charging = "false" ]
            then symbol='\uf579' ; color='%F{red}' ;
        else
            symbol='\uf585' ;
        fi
  elif [ $percentage -gt 19 ] && [ $percentage -le 30 ]
    then if [ $charging = "false" ]
            then symbol="\uf57a" ; color='%F{red}' ;
        else
            symbol='\uf585' ;
        fi
  elif [ $percentage -gt 29 ] && [ $percentage -le 40 ]
    then if [ $charging = "false" ]
            then symbol="\uf57b" ; color='%F{yellow}' ;
        else
            symbol='\uf586' ;
        fi
  elif [ $percentage -gt 39 ] && [ $percentage -le 50 ]
    then if [ $charging = "false" ]
            then symbol="\uf57c" ; color='%F{yellow}' ;
        else
            symbol='\uf587' ;
        fi
  elif [ $percentage -gt 49 ] && [ $percentage -le 60 ]
    then if [ $charging = "false" ]
            then symbol="\uf57d" ; color='%F{blue}' ;
        else
            symbol='\uf587' ;
        fi
  elif [ $percentage -gt 59 ] && [ $percentage -le 70 ]
    then if [ $charging = "false" ]
            then symbol="\uf57e" ; color='%F{blue}' ;
        else
            symbol='\uf588' ;
        fi
  elif [ $percentage -gt 69 ] && [ $percentage -le 80 ]
    then if [ $charging = "false" ]
            then symbol="\uf57f" ; color='%F{blue}' ;
        else
            symbol='\uf588' ;
        fi
  elif [ $percentage -gt 79 ] && [ $percentage -le 90 ]
    then if [ $charging = "false" ]
            then symbol="\uf580" ; color='%F{blue}' ;
        else
            symbol='\uf589' ; color='%F{green}';
        fi
  elif [ $percentage -gt 89 ] && [ $percentage -le 99 ]
    then if [ $charging = "false" ]
            then symbol="\uf581" ; color='%F{blue}' ;
        else
            symbol='\uf58a' ; color='%F{green}';
        fi
  elif [ $percentage -gt 98 ]
    then if [ $charging = "false" ]
            then symbol="\uf578" ; color='%F{green}' ;
        else
            symbol='\uf584' ; color='%F{green}';
        fi
  fi
  echo -n "%{$color%}$symbol" ;
}